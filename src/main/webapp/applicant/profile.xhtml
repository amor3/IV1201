<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">


    <h:head>
        <title>Blåa lund</title>

        <!-- Latest compiled and minified CSS -->
        <h:outputStylesheet library="css" name="bootstrap.min.css"  />


        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css"/>
        <!-- Custom CSS -->
        <h:outputStylesheet library="css" name="sb-admin.css"  />

        <!-- Custom Fonts -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" />


        <!-- Script Libs -->
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>  
        
        <style type="text/css">
            .ui-growl{
                top:60px;
            }
        </style>
    </h:head>

    <h:body>
        
        <p:growl id="growl" showDetail="true" />  
         
        <ui:include src="../nav_backend.xhtml"></ui:include>

        <div id="wrapper">

            <div id="page-wrapper">

                <div class="container-fluid">

                    <!-- Page Heading -->
                    <div class="row">
                        <div class="col-lg-12">
                            <h1 class="page-header">
                                Min <small>profil</small>
                            </h1>
                            <ol class="breadcrumb">
                                <li class="active">
                                    <i class="fa fa-dashboard"></i> Kontrollpanel
                                </li>
                            </ol>
                        </div>
                    </div>
                    <!-- /.row -->

                    <div class="row">
                        <div class="col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-fw"></i> Kontaktuppgifter</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h:form class="form-horizontal" role="form">
                                                <fieldset>
                                                    <!-- Text input-->
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">Förnamn</label>
                                                        <div class="col-sm-10">
                                                            <h:inputText value="#{applicantManager.firstname}" class="form-control"/>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">Efternamn</label>
                                                        <div class="col-sm-10">
                                                            <h:inputText value="#{applicantManager.lastname}" class="form-control"/>
                                                        </div>
                                                    </div>

                                                    <!-- Text input-->
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">Personnummer</label>
                                                        <div class="col-sm-10">
                                                            <h:inputText value="#{applicantManager.ssn}" class="form-control"/>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <div class="col-sm-offset-2 col-sm-10">
                                                            <div class="pull-right">
                                                                <button type="submit" style="margin:5px;" class="btn btn-default">Avbryt</button>
                                                                <h:commandButton style="margin:5px;" type="submit" value="Spara" action="#{applicantManager.saveUserProfile()}" class="btn btn-primary"/>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </fieldset>
                                            </h:form>
                                        </div><!-- /.col-lg-12 -->

                                    </div><!-- /.row -->

                                </div>
                            </div>
                        </div>





                        <div class="col-lg-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title"><i class="fa fa-bar-chart-o fa-fw"></i> Inloggningsinställningar</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h:form class="form-horizontal" role="form">
                                                <fieldset>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">E-post</label>
                                                        <div class="col-sm-10">
                                                            <h:inputText value="#{applicantManager.email}" disabled="true" class="form-control"/>
                                                        </div>
                                                    </div>


                                                    <!-- Text input-->
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">Gamla lösenordet</label>
                                                        <div class="col-sm-10">
                                                            <h:inputSecret value="#{applicantManager.oldPassword}" class="form-control" id="oldPassword" />
                                                            <h:message for="oldPassword" errorClass="invalid" style="color:red" />
                                                        </div>
                                                    </div>


                                                    <!-- Text input-->
                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">Lösenord</label>
                                                        <div class="col-sm-10">
                                                            <p:password id="newPassword" 
                                                                        value="#{applicantManager.newPassword}" 
                                                                        match="newPasswordAgain" 
                                                                        validatorMessage="Lösenordets längd skall vara minst 6 tecken och lösenorden du angivit skall vara identiska" 
                                                                        styleClass="form-control">
                                                                <f:validateLength minimum="6" />
                                                            </p:password>
                                                            <p:message for="newPassword" style="color:red" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="col-sm-2 control-label" for="textinput">Lösenord igen</label>
                                                        <div class="col-sm-10">
                                                            <p:password id="newPasswordAgain" 
                                                                        value="#{applicantManager.newPasswordAgain}" 
                                                                        validatorMessage="Lösenordets längd skall vara minst 6 tecken och lösenorden du angivit skall vara identiska" 
                                                                        styleClass="form-control">
                                                                <f:validateLength minimum="6" />
                                                            </p:password>
                                                            <p:message for="newPasswordAgain" style="color:red" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <div class="col-sm-offset-2 col-sm-10">
                                                            <div class="pull-right">
                                                                <button style="margin:5px;" type="submit" class="btn btn-default">Avbryt</button>
                                                                <h:commandButton style="margin:5px;" type="submit" value="Spara" action="#{applicantManager.saveUserCredentials()}" class="btn btn-primary"/>
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <c:choose>
                                                        <c:when test="#{applicantManager.meddelande eq 'true'}">
                                                            <h:outputText style="color:green; font-size: 14px; font-weight: bold;" value="Du har nu ändrat ditt lösenord."/>
                                                        </c:when>
                                                        <c:when test="#{applicantManager.meddelande eq 'false'}">
                                                            <h:outputText style="color:red; font-size: 14px; font-weight: bold;" value="Det gick inte att ändra lösenordet, du har förmodligen skrivit in det gamla lösenordet på ett felaktigt sätt eller så matchar inte det lösenord du vill skapa.."/>
                                                        </c:when>
                                                        <c:otherwise>
                                                            <h:outputText value=""/>
                                                        </c:otherwise>
                                                    </c:choose>


                                                </fieldset>
                                                
                                                
                                            </h:form>
                                        </div><!-- /.col-lg-12 -->

                                    </div><!-- /.row -->

                                </div>
                            </div>
                        </div>



                    </div>
                    <!-- /.row --> 





                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- /#page-wrapper -->

        </div>
        <!-- /#wrapper -->


    </h:body>
</html>

